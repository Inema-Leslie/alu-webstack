#!/usr/bin/env bash

# Function to get DNS information for a subdomain
get_dns_info() {
    local domain=$1
    local subdomain=$2

    # Use dig to get the DNS record
    result=$(dig +short "$subdomain.$domain")

    if [ -z "$result" ]; then
        echo "The subdomain $subdomain does not exist or has no A record."
    else
        echo "The subdomain $subdomain is a A record and points to $result"
    fi
}

# Main script logic
main() {
    local domain=$1
    local subdomain=$2

    # If only domain is provided, display info for all subdomains
    if [ -z "$subdomain" ]; then
        get_dns_info "$domain" "www"
        get_dns_info "$domain" "lb-01"
        get_dns_info "$domain" "web-01"
        get_dns_info "$domain" "web-02"
    else
        # If subdomain is provided, display info for that subdomain
        get_dns_info "$domain" "$subdomain"
    fi
}

# Execute the script with the provided arguments
main "$1" "$2"
